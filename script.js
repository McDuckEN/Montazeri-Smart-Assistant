let eventsInitialized = false;
const OPENAI_API_KEY = "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";


let requestInProgress = false;

// Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø§Ø±Ø³Ø§Ù„â€ŒÙ‡Ø§ÛŒ Ù¾Ø´Øªâ€ŒØ³Ø±Ù‡Ù…
let lastRequestTime = 0;
const MIN_DELAY = 1500

function initializeEventListeners() 
{
    if (eventsInitialized) return;  // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø¯ÙˆØ¨Ø§Ø± Ø§Ø¬Ø±Ø§ Ø´Ø¯Ù†
    eventsInitialized = true;

    // ... ØªÙ…Ø§Ù… event listenerÙ‡Ø§ÛŒ Ù‚Ø¨Ù„ÛŒ ...
}



class AIChatAssistant 
{
    
    constructor() 
    {
        this.conversationHistory = [];
        this.isAPIEnabled = true;
        
        this.chatGPTApiKey = "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"; // API Key Ø®ÙˆØ¯ØªØ§Ù† Ø±Ø§ Ù‚Ø±Ø§Ø± Ø¯Ù‡ÛŒØ¯
        this.chatGPTEndpoint = "https://api.openai.com/v1/responses";
        this.isChatGPTAvailable = false;
        
        this.initializeEventListeners();
        this.checkChatGPTAvailability();
        
        console.log('ğŸ”§ Ø¯Ø³ØªÛŒØ§Ø± Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ù…Ù†ØªØ¸Ø±ÛŒ Ø¨Ø§ ChatGPT Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø´Ø¯');
    }

    async checkChatGPTAvailability() 
    {
        try 
        {
            const response = await fetch('https://api.openai.com/v1/models', {
                headers: {
                    'Authorization': `Bearer ${this.chatGPTApiKey}`
                }
            });
            
            if (response.ok) 
            {
                this.isChatGPTAvailable = true;
                this.updateStatus('âœ… Ù…ØªØµÙ„ Ø¨Ù‡ ChatGPT');
                console.log('âœ… Ø§ØªØµØ§Ù„ Ø¨Ù‡ ChatGPT Ø¨Ø±Ù‚Ø±Ø§Ø± Ø§Ø³Øª');
            } 
            else 
            {
                throw new Error('Ø§ØªØµØ§Ù„ Ø¨Ø±Ù‚Ø±Ø§Ø± Ù†Ø´Ø¯');
            }
        } 
        catch (error)
         {
            console.warn('âš ï¸ ChatGPT Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ù†ÛŒØ³Øª:', error);
            this.isChatGPTAvailable = false;
            this.updateStatus('ğŸŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù…Ø¯Ù„ Ø¯Ø§Ø®Ù„ÛŒ');
        }
        
        //this.showWelcomeMessage();
    }

    updateStatus(message) 
    {
        const statusElement = document.getElementById('api-status');
        if (statusElement) 
        {
            statusElement.innerHTML = `<span>${message}</span>`;
        }
    }

    showWelcomeMessage() 
    {
        setTimeout(() => {
            if (this.isChatGPTAvailable) 
            {
                this.displayMessage(
                    "ğŸ“ **Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ù…Ù†ØªØ¸Ø±ÛŒ**\n\n" +
                    "âœ¨ **Ù‚Ø¯Ø±Øª Ú¯Ø±ÙØªÙ‡ Ø§Ø² ChatGPT 3.5 Turbo** âœ¨\n\n" +
                    "Ù…Ù† Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù… Ø¨Ù‡ Ø³ÙˆØ§Ù„Ø§Øª Ø´Ù…Ø§ Ø¯Ø±Ø¨Ø§Ø±Ù‡:\n" +
                    "â€¢ ğŸ“š Ø¨Ø±Ù†Ø§Ù…Ù‡ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ Ùˆ Ø§Ù…ØªØ­Ø§Ù†Ø§Øª\n" +
                    "â€¢ ğŸ“ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ ÙˆØ§Ø­Ø¯\n" +
                    "â€¢ ğŸ‘¨â€ğŸ« Ø§Ø³Ø§ØªÛŒØ¯ Ùˆ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ø±ÙˆØ³\n" +
                    "â€¢ ğŸ“– Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ Ùˆ Ù…Ù†Ø§Ø¨Ø¹ Ø¢Ù…ÙˆØ²Ø´ÛŒ\n" +
                    "â€¢ ğŸ  Ø®ÙˆØ§Ø¨Ú¯Ø§Ù‡ Ùˆ Ø§Ù…Ú©Ø§Ù†Ø§Øª\n" +
                    "â€¢ ğŸ’° Ø´Ù‡Ø±ÛŒÙ‡ Ùˆ ÙˆØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ù†Ø´Ø¬ÙˆÛŒÛŒ\n" +
                    "â€¢ âš–ï¸ Ù‚ÙˆØ§Ù†ÛŒÙ† Ø§Ù†Ø¶Ø¨Ø§Ø·ÛŒ\n\n" +
                    "Ø³ÙˆØ§Ù„ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù¾Ø±Ø³ÛŒØ¯...",
                    'bot'
                );
            } 
            else 
            {
                this.displayMessage(
                    "ğŸ“ **Ø¯Ø³ØªÛŒØ§Ø± Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ù…Ù†ØªØ¸Ø±ÛŒ**\n\n" +
                    "âš ï¸ **ChatGPT Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ù†ÛŒØ³Øª**\n\n" +
                    "Ø¯Ø± Ø­Ø§Ù„ Ø­Ø§Ø¶Ø± Ø§Ø² Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ø¯Ø§Ø®Ù„ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.\n\n" +
                    "ğŸ“ **Ø±Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø±ØªØ¨Ø§Ø·ÛŒ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡:**\n" +
                    "â€¢ ØªÙ„ÙÙ†: Û°Û²Û±-Û¶Û¶Û±ÛµÛ°Û°Û°Û°\n" +
                    "â€¢ Ø³Ø§ÛŒØª: www.montazeri-univ.ac.ir\n" +
                    "â€¢ Ø³Ø§Ù…Ø§Ù†Ù‡: sama.montazeri.ac.ir\n\n" +
                    "Ø³ÙˆØ§Ù„ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù¾Ø±Ø³ÛŒØ¯...",
                    'bot'
                );
            }
        }, 500);
    }

    initializeEventListeners() 
    {
        const sendBtn = document.getElementById('send-btn');
        const userInput = document.getElementById('user-input');
        const quickBtns = document.querySelectorAll('.quick-btn');

        if (sendBtn) 
        {
            sendBtn.addEventListener('click', () => this.handleUserInput());
        }
        
        if (userInput) 
        {
            userInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') 
                {
                    this.handleUserInput();
                }
            });

            setTimeout(() => userInput.focus(), 1500);
        }

        if (quickBtns) 
        {
            quickBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const question = btn.getAttribute('data-question');
                    this.askQuestion(question);
                });
            });
        }

        const apiSettings = document.querySelector('.api-settings');
        if (apiSettings) 
        {
            apiSettings.style.display = 'none';
        }
    }

    async handleUserInput() 
    {
        const userInput = document.getElementById('user-input');
        if (!userInput) return;
        
        const question = userInput.value.trim();
        
        if (question) 
        {
            await this.askQuestion(question);
            userInput.value = '';
        }
    }

    async askQuestion(question)
    {
        this.displayMessage(question, 'user');
        this.showTypingIndicator();
        
        try 
        {
            let answer;
            
            if (this.isChatGPTAvailable && this.isAPIEnabled) 
            {
                console.log('ğŸ”„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ù‡ ChatGPT Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯...');
                answer = await this.getChatGPTResponse(question);
            } 
            else 
            {
                await new Promise(resolve => setTimeout(resolve, 800));
                answer = this.getEnhancedResponse(question);
            }
            
            this.hideTypingIndicator();
            this.displayMessage(answer, 'bot');
            
            // Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ù…Ú©Ø§Ù„Ù…Ù‡
            this.conversationHistory.push(
        {
                question,
                answer,
                timestamp: new Date().toISOString(),
                source: this.isChatGPTAvailable ? 'chatgpt' : 'local'
            });
            
        }
         catch (error) 
        {
            this.hideTypingIndicator();
            console.error('Error in askQuestion:', error);
            const fallbackAnswer = this.getEnhancedResponse(question);
            this.displayMessage(fallbackAnswer, 'bot');
        }
    }

    async getChatGPTResponse(userMessage) {
        // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø§Ø±Ø³Ø§Ù„ Ø³Ø±ÛŒØ¹ Ù¾Ø´Øª Ø³Ø± Ù‡Ù…
        if (requestInProgress) return "Ù„Ø·ÙØ§Ù‹ Ú†Ù†Ø¯ Ù„Ø­Ø¸Ù‡ ØµØ¨Ø± Ú©Ù†ÛŒØ¯...";
        const now = Date.now();
        if (now - lastRequestTime < MIN_DELAY) return "Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ù‡Ø³ØªÙ…ØŒ ÛŒÚ© Ù„Ø­Ø¸Ù‡ ØµØ¨Ø± Ú©Ù†...";
        
        requestInProgress = true;
        lastRequestTime = now;
    
        try {
            const response = await fetch("https://api.openai.com/v1/responses", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "Authorization": `Bearer ${this.chatGPTApiKey}`
                },
                body: JSON.stringify({
                    model: "gpt-4.1-mini",
                    input: [
                        { role: "system", content: "You are a helpful assistant." },
                        { role: "user", content: userMessage }
                    ]
                })
            });
            
            const data = await response.json();
            
            // Ù¾Ø§Ø³Ø® Ø§ØµÙ„ÛŒ
            if (!response.ok || data.error) {
                console.warn("âŒ Ø®Ø·Ø§ÛŒ OpenAI:", data);
                return this.getEnhancedResponse(userMessage); // fallback Ø¯Ø§Ø®Ù„ÛŒ
            }
            
            // Ù¾Ø§Ø³Ø® Ø§Ø² API Ø¬Ø¯ÛŒØ¯
            return data.output_text || this.getEnhancedResponse(userMessage);
            
            
        } catch (err) {
            console.error("âŒ Ø®Ø·Ø§ÛŒ Ø´Ø¨Ú©Ù‡:", err);
            // fallback Ø¨Ù‡ Ù¾Ø§Ø³Ø® Ø¯Ø§Ø®Ù„ÛŒ
            return this.getEnhancedResponse(userMessage);
        } finally {
            requestInProgress = false;
        }
    }
    

    getEnhancedResponse(question) 
    {
        // Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ù†Ø´ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø¨Ø±Ø§ÛŒ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ù…Ù†ØªØ¸Ø±ÛŒ
        const enhancedKnowledge = 
        {
            "Ú©Ù„Ø§Ø³": [
                "ğŸ“š **Ø¨Ø±Ù†Ø§Ù…Ù‡ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ ØªØ±Ù… Ù¾Ø§ÛŒÛŒØ²  Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ù…Ù†ØªØ¸Ø±ÛŒ:**\n\n" +
                "ğŸ« **Ø¯ÙˆØ±Ù‡â€ŒÙ‡Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ:**\n" +
                "â€¢ Ø´Ø±ÙˆØ¹ ØªØ±Ù…: Ûµ Ù…Ù‡Ø±   \n" +
                "â€¢ Ù¾Ø§ÛŒØ§Ù† ØªØ±Ù…: Û²Û¸ Ø¯ÛŒ   \n" +
                "â€¢ Ø³Ø§Ø¹Ø§Øª Ú©Ø§Ø±ÛŒ: Û¸:Û°Û°-Û±Û²:Û°Û° Ùˆ Û±Û´:Û°Û°-Û±Û¸:Û°Û°\n\n" +
                "ğŸ¯ **Ù†Ú©Ø§Øª Ù…Ù‡Ù…:**\n" +
                "â€¢ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ú©Ø§Ù…Ù„ Ø¯Ø± Ø³Ø§Ù…Ø§Ù†Ù‡ Ø³Ù…Ø§ Ù‚Ø§Ø¨Ù„ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø§Ø³Øª\n" +
                "â€¢ Ø¨Ø±Ø§ÛŒ ØªØºÛŒÛŒØ± Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø¨Ø§ Ù…Ø¯ÛŒØ± Ú¯Ø±ÙˆÙ‡ Ù‡Ù…Ø§Ù‡Ù†Ú¯ Ú©Ù†ÛŒØ¯\n" +
                "â€¢ ØºÛŒØ¨Øª Ø¨ÛŒØ´ Ø§Ø² Û´ Ø¬Ù„Ø³Ù‡ Ù…Ù†Ø¬Ø± Ø¨Ù‡ Ù…Ø­Ø±ÙˆÙ…ÛŒØª Ù…ÛŒâ€ŒØ´ÙˆØ¯",

                "â° **Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ù…Ù†ØªØ¸Ø±ÛŒ**\n\n" +
                "ğŸ“ **Ù…Ø­Ù„ Ø¨Ø±Ú¯Ø²Ø§Ø±ÛŒ:**\n" +
                "â€¢ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ù†Ø¸Ø±ÛŒ: Ø³Ø§Ø®ØªÙ…Ø§Ù† Ø§ØµÙ„ÛŒ\n" +
                "â€¢ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ø¹Ù…Ù„ÛŒ: Ø¢Ø²Ù…Ø§ÛŒØ´Ú¯Ø§Ù‡ Ø¯Ø§Ù†Ø´Ú©Ø¯Ù‡ ÙÙ†ÛŒ\n" +
                "â€¢ Ú©Ø§Ø±Ú¯Ø§Ù‡â€ŒÙ‡Ø§: Ø³Ø§Ø®ØªÙ…Ø§Ù† Ú©Ø§Ø±Ú¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ®ØµØµÛŒ\n\n" +
                "ğŸ“± **Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø¨Ø±Ù†Ø§Ù…Ù‡:**\n" +
                "â€¢ Ø³Ø§Ù…Ø§Ù†Ù‡ Ø³Ù…Ø§ â†’ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù‡ÙØªÚ¯ÛŒ\n" +
                "â€¢ Ø§Ù†ØªØ®Ø§Ø¨ ØªØ±Ù… Ø¬Ø§Ø±ÛŒ\n" +
                "â€¢ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø±Ø´ØªÙ‡ Ø®ÙˆØ¯"
            ],

            "Ø¨Ø±Ù†Ø§Ù…Ù‡ Ú©Ù„Ø§Ø³": [
                "ğŸ—“ï¸ **Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù‡ÙØªÚ¯ÛŒ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ù…Ù†ØªØ¸Ø±ÛŒ**\n\n" +
                "ğŸ“… **Ø±ÙˆØ²Ù‡Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ:**\n" +
                "â€¢ Ø´Ù†Ø¨Ù‡ ØªØ§ Ú†Ù‡Ø§Ø±Ø´Ù†Ø¨Ù‡: Ø±ÙˆØ²Ù‡Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ\n" +
                "â€¢ Ù¾Ù†Ø¬Ø´Ù†Ø¨Ù‡: Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ø¬Ø¨Ø±Ø§Ù†ÛŒ\n" +
                "â€¢ Ø¬Ù…Ø¹Ù‡: ØªØ¹Ø·ÛŒÙ„\n" +
                "â€¢ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù‡Ø± Ø±Ø´ØªÙ‡ Ø¯Ø± Ø³Ø§Ù…Ø§Ù†Ù‡ Ø³Ù…Ø§ Ù…ÙˆØ¬ÙˆØ¯ Ø§Ø³Øª\n\n" +
                "ğŸ“± **Ø¯Ø³ØªØ±Ø³ÛŒ:** Ø³Ù…Ø§ â†’ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù‡ÙØªÚ¯ÛŒ â†’ Ø§Ù†ØªØ®Ø§Ø¨ ØªØ±Ù…",

                "ğŸ“… **Ø¨Ø±Ù†Ø§Ù…Ù‡ ØªØ±Ù…ÛŒ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡**\n\n" +
                "ğŸ—“ï¸ **ØªØ§Ø±ÛŒØ®â€ŒÙ‡Ø§ÛŒ Ù…Ù‡Ù…:**\n" +
                "â€¢ Ù…ÛŒØ§Ù† ØªØ±Ù…: Ù‡ÙØªÙ‡ Û¸ Ø¢Ù…ÙˆØ²Ø´ÛŒ\n" +
                "â€¢ Ù¾Ø§ÛŒØ§Ù† ØªØ±Ù…: Û²Û° Ø¯ÛŒ ØªØ§ Û±Û° Ø¨Ù‡Ù…Ù†\n" +
                "â€¢ ØªØ¹Ø·ÛŒÙ„Ø§Øª: Ø¯Ø± ØªÙ‚ÙˆÛŒÙ… Ø¢Ù…ÙˆØ²Ø´ÛŒ Ù…Ø´Ø®Øµ Ø´Ø¯Ù‡\n" +
                "â€¢ ØªØºÛŒÛŒØ±Ø§Øª: Ø§Ø² Ø·Ø±ÛŒÙ‚ Ø³Ø§Ù…Ø§Ù†Ù‡ Ø§Ø¹Ù„Ø§Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯"
            ],

            "Ø§Ù…ØªØ­Ø§Ù†": [
                "ğŸ“ **Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø§Ù…ØªØ­Ø§Ù†Ø§Øª ØªØ±Ù… Ù¾Ø§ÛŒÛŒØ²   **\n\n" +
                "ğŸ—“ï¸ **ØªØ§Ø±ÛŒØ®â€ŒÙ‡Ø§ÛŒ Ù…Ù‡Ù…:**\n" +
                "â€¢ Ø§Ù…ØªØ­Ø§Ù†Ø§Øª Ù…ÛŒØ§Ù† ØªØ±Ù…: Ù‡ÙØªÙ‡ Û¸ Ø¢Ù…ÙˆØ²Ø´ÛŒ\n" +
                "â€¢ Ø§Ù…ØªØ­Ø§Ù†Ø§Øª Ù¾Ø§ÛŒØ§Ù† ØªØ±Ù…: Û²Û° Ø¯ÛŒ ØªØ§ Û±Û° Ø¨Ù‡Ù…Ù†\n" +
                "â€¢ Ø§Ø¹Ù„Ø§Ù… Ø¨Ø±Ù†Ø§Ù…Ù‡: Û² Ù‡ÙØªÙ‡ Ù‚Ø¨Ù„ Ø§Ø² Ø§Ù…ØªØ­Ø§Ù†Ø§Øª\n\n" +
                "ğŸ›ï¸ **Ù…Ø­Ù„ Ø¨Ø±Ú¯Ø²Ø§Ø±ÛŒ:**\n" +
                "â€¢ Ø³Ø§Ù„Ù†â€ŒÙ‡Ø§ÛŒ A, B, C Ø³Ø§Ø®ØªÙ…Ø§Ù† Ù…Ø±Ú©Ø²ÛŒ\n" +
                "â€¢ Ø²Ù…Ø§Ù† Ù…Ø±Ø§Ø¬Ø¹Ù‡: Û³Û° Ø¯Ù‚ÛŒÙ‚Ù‡ Ù‚Ø¨Ù„ Ø§Ø² Ø´Ø±ÙˆØ¹",

                "ğŸ¯ **Ù‚ÙˆØ§Ù†ÛŒÙ† Ø§Ù…ØªØ­Ø§Ù†Ø§Øª Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ù…Ù†ØªØ¸Ø±ÛŒ**\n\n" +
                "ğŸ“‹ **Ù…Ù‚Ø±Ø±Ø§Øª:**\n" +
                "â€¢ Ú©Ø§Ø±Øª Ø¯Ø§Ù†Ø´Ø¬ÙˆÛŒÛŒ Ø§Ù„Ø²Ø§Ù…ÛŒ Ø§Ø³Øª\n" +
                "â€¢ ÙˆØ³Ø§ÛŒÙ„ Ø´Ø®ØµÛŒ Ù…Ø¬Ø§Ø² Ù†ÛŒØ³Øª\n" +
                "â€¢ ØªØ§Ø®ÛŒØ± Ø­Ø¯Ø§Ú©Ø«Ø± Û±Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡ Ù…Ø¬Ø§Ø²\n" +
                "â€¢ ØºÛŒØ¨Øª Ø¨ÛŒØ´ Ø§Ø² Ø­Ø¯ = Ù…Ø­Ø±ÙˆÙ…ÛŒØª\n\n" +
                "ğŸ’¡ **ØªÙˆØµÛŒÙ‡:**\n" +
                "â€¢ Ù…Ù†Ø§Ø¨Ø¹ Ø¯Ø±Ø³ÛŒ Ø±Ø§ Ø§Ø² Ø³Ø§Ù…Ø§Ù†Ù‡ LMS Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†ÛŒØ¯\n" +
                "â€¢ Ø¯Ø± Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ø¬Ø¨Ø±Ø§Ù†ÛŒ Ø´Ø±Ú©Øª Ú©Ù†ÛŒØ¯"
            ],

            "Ù¾Ø§ÛŒØ§Ù† ØªØ±Ù…": [
                "ğŸ **Ø§Ù…ØªØ­Ø§Ù†Ø§Øª Ù¾Ø§ÛŒØ§Ù† ØªØ±Ù…   **\n\n" +
                "ğŸ—“ï¸ **Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø²Ù…Ø§Ù†ÛŒ:**\n" +
                "â€¢ Ø´Ø±ÙˆØ¹: Û²Û° Ø¯ÛŒ Ù…Ø§Ù‡   \n" +
                "â€¢ Ù¾Ø§ÛŒØ§Ù†: Û±Û° Ø¨Ù‡Ù…Ù†   \n" +
                "â€¢ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù†Ù‡Ø§ÛŒÛŒ: Û±Ûµ Ø¯ÛŒ Ø§Ø¹Ù„Ø§Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯\n" +
                "â€¢ Ø³Ø§Ù„Ù†â€ŒÙ‡Ø§: A, B, C Ø³Ø§Ø®ØªÙ…Ø§Ù† Ù…Ø±Ú©Ø²ÛŒ\n\n" +
                "ğŸ“Š **Ù†ØªØ§ÛŒØ¬:** Û±Ûµ Ø±ÙˆØ² Ù¾Ø³ Ø§Ø² Ø¢Ø®Ø±ÛŒÙ† Ø§Ù…ØªØ­Ø§Ù†",

                "ğŸ“š **Ø¢Ù…Ø§Ø¯Ú¯ÛŒ Ø¨Ø±Ø§ÛŒ Ù¾Ø§ÛŒØ§Ù† ØªØ±Ù…**\n\n" +
                "ğŸ¯ **Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒÛŒâ€ŒÙ‡Ø§:**\n" +
                "â€¢ Ù…Ù†Ø§Ø¨Ø¹: Ø¯Ø± Ø³Ø§Ù…Ø§Ù†Ù‡ LMS Ù…ÙˆØ¬ÙˆØ¯ Ø§Ø³Øª\n" +
                "â€¢ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ø¬Ø¨Ø±Ø§Ù†ÛŒ: Ù‡ÙØªÙ‡ Û±Û´ Ø¨Ø±Ú¯Ø²Ø§Ø± Ù…ÛŒâ€ŒØ´ÙˆØ¯\n" +
                "â€¢ Ù…Ø´Ø§ÙˆØ±Ù‡ ØªØ­ØµÛŒÙ„ÛŒ: ÙˆØ§Ø­Ø¯ Ù…Ø´Ø§ÙˆØ±Ù‡ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡\n" +
                "â€¢ Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡: ØªØ§ Û²Û² Ø´Ø¨ ÙØ¹Ø§Ù„ Ø§Ø³Øª"
            ],

            "Ù…ÛŒØ§Ù† ØªØ±Ù…": [
                "ğŸ“‹ **Ø§Ù…ØªØ­Ø§Ù†Ø§Øª Ù…ÛŒØ§Ù† ØªØ±Ù…**\n\n" +
                "â° **Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ:**\n" +
                "â€¢ Ø²Ù…Ø§Ù†: Ù‡ÙØªÙ‡ Û¸ Ø¢Ù…ÙˆØ²Ø´ÛŒ\n" +
                "â€¢ Ù…Ø­ØªÙˆØ§: Ù†ÛŒÙ…ÛŒ Ø§Ø² Ù…Ø·Ø§Ù„Ø¨ ØªØ¯Ø±ÛŒØ³ Ø´Ø¯Ù‡\n" +
                "â€¢ Ø¶Ø±ÛŒØ¨: Û³Û°Ùª Ù†Ù…Ø±Ù‡ Ù¾Ø§ÛŒØ§Ù†ÛŒ\n" +
                "â€¢ Ø¨Ø±Ù†Ø§Ù…Ù‡: ØªÙˆØ³Ø· Ø§Ø³Ø§ØªÛŒØ¯ Ø§Ø¹Ù„Ø§Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯\n\n" +
                "ğŸ“ **ØªØ§Ø«ÛŒØ±:** Ù†Ù…Ø±Ù‡ Ù…ÛŒØ§Ù† ØªØ±Ù… Ø¯Ø± Ù…Ø¹Ø¯Ù„ Ù…ÙˆØ«Ø± Ø§Ø³Øª",

                "â³ **Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù…ÛŒØ§Ù† ØªØ±Ù…   **\n\n" +
                "ğŸ—“ï¸ **Ø¬Ø²Ø¦ÛŒØ§Øª:**\n" +
                "â€¢ ØªØ§Ø±ÛŒØ®: Û²Û° Ø¢Ø°Ø± ØªØ§ Û²Ûµ Ø¢Ø°Ø±\n" +
                "â€¢ Ù…Ø­Ù„: Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ø¹Ù…ÙˆÙ„\n" +
                "â€¢ Ù…Ø¯Øª: Û± Ø³Ø§Ø¹Øª\n" +
                "â€¢ Ù†Ù…Ø±Ù‡ Ø¯Ù‡ÛŒ: ØªØ§ Û±Û° Ø±ÙˆØ² Ù¾Ø³ Ø§Ø² Ø§Ù…ØªØ­Ø§Ù†"
            ],

            "Ø«Ø¨Øª Ù†Ø§Ù…": [
                "ğŸ“ **Ø«Ø¨Øª Ù†Ø§Ù… ØªØ±Ù… Ù¾Ø§ÛŒÛŒØ²    Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ù…Ù†ØªØ¸Ø±ÛŒ**\n\n" +
                "â° **Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ:**\n" +
                "â€¢ Ø´Ø±ÙˆØ¹: Û±Ûµ Ø´Ù‡Ø±ÛŒÙˆØ±   \n" +
                "â€¢ Ù¾Ø§ÛŒØ§Ù†: Û±Û° Ù…Ù‡Ø±   \n" +
                "â€¢ Ù…Ù‡Ù„Øª ØªØºÛŒÛŒØ±: ØªØ§ Ù‡ÙØªÙ‡ Ø¯ÙˆÙ…\n\n" +
                "ğŸ’» **Ø±ÙˆØ´ Ø«Ø¨Øª Ù†Ø§Ù…:**\n" +
                "â€¢ ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³Ø§Ù…Ø§Ù†Ù‡ Ø³Ù…Ø§\n" +
                "â€¢ Ø§Ù†ØªØ®Ø§Ø¨ ÙˆØ§Ø­Ø¯\n" +
                "â€¢ Ù¾Ø±Ø¯Ø§Ø®Øª Ø´Ù‡Ø±ÛŒÙ‡\n" +
                "â€¢ ØªØ§ÛŒÛŒØ¯ Ù†Ù‡Ø§ÛŒÛŒ",

                "ğŸ“„ **Ù…Ø¯Ø§Ø±Ú© Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² Ø¨Ø±Ø§ÛŒ Ø«Ø¨Øª Ù†Ø§Ù…**\n\n" +
                "âœ… **Ø§Ù„Ø²Ø§Ù…ÛŒ:**\n" +
                "â€¢ ØªØµÙˆÛŒØ± Ú©Ø§Ø±Øª Ø¯Ø§Ù†Ø´Ø¬ÙˆÛŒÛŒ\n" +
                "â€¢ ÙÛŒØ´ ÙˆØ§Ø±ÛŒØ²ÛŒ Ø´Ù‡Ø±ÛŒÙ‡\n" +
                "â€¢ Ø¹Ú©Ø³ Û³*Û´ Ø¬Ø¯ÛŒØ¯\n\n" +
                "ğŸ”§ **Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ ÙÙ†ÛŒ:**\n" +
                "â€¢ ÙˆØ§Ø­Ø¯ ÙÙ†Ø§ÙˆØ±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª\n" +
                "â€¢ Ø¯Ø§Ø®Ù„ÛŒ: Û±Û²Û³\n" +
                "â€¢ Ø³Ø§Ø¹Ø§Øª Ú©Ø§Ø±ÛŒ: Û¸-Û±Û¶"
            ],

            "Ø§Ù†ØªØ®Ø§Ø¨ ÙˆØ§Ø­Ø¯": [
                "ğŸ“‹ **Ø´Ø±Ø§ÛŒØ· Ø§Ù†ØªØ®Ø§Ø¨ ÙˆØ§Ø­Ø¯ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ù…Ù†ØªØ¸Ø±ÛŒ**\n\n" +
                "ğŸ“Š **Ø­Ø¯ÙˆØ¯ ÙˆØ§Ø­Ø¯:**\n" +
                "â€¢ Ø­Ø¯Ø§Ú©Ø«Ø± ÙˆØ§Ø­Ø¯: Û²Û° ÙˆØ§Ø­Ø¯\n" +
                "â€¢ Ø¯Ø§Ù†Ø´Ø¬ÙˆÛŒØ§Ù† Ù…Ù…ØªØ§Ø²: Û²Û´ ÙˆØ§Ø­Ø¯ (Ù…Ø¹Ø¯Ù„ Ø¨Ø§Ù„Ø§ÛŒ Û±Û·)\n" +
                "â€¢ Ø­Ø¯Ø§Ù‚Ù„ ÙˆØ§Ø­Ø¯: Û±Û² ÙˆØ§Ø­Ø¯\n" +
                "â€¢ Ù…Ù‡Ù„Øª ØªØºÛŒÛŒØ±: ØªØ§ Ù¾Ø§ÛŒØ§Ù† Ù‡ÙØªÙ‡ Ø¯ÙˆÙ…\n\n" +
                "ğŸ¯ **Ù…Ù„Ø§Ø­Ø¸Ø§Øª:**\n" +
                "â€¢ Ø¯Ø±ÙˆØ³ Ù¾ÛŒØ´â€ŒÙ†ÛŒØ§Ø² Ø±Ø¹Ø§ÛŒØª Ø´ÙˆØ¯\n" +
                "â€¢ ØªØ¯Ø§Ø®Ù„ Ø²Ù…Ø§Ù†ÛŒ Ø¨Ø±Ø±Ø³ÛŒ Ø´ÙˆØ¯\n" +
                "â€¢ ØªØ§ÛŒÛŒØ¯ Ù…Ø¯ÛŒØ± Ú¯Ø±ÙˆÙ‡ Ø¨Ø±Ø§ÛŒ ÙˆØ§Ø­Ø¯ Ø§Ø¶Ø§ÙÛŒ",

                "ğŸ”§ **Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ ÙˆØ§Ø­Ø¯**\n\n" +
                "ğŸ“ **Ù†Ú©Ø§Øª Ù…Ù‡Ù…:**\n" +
                "â€¢ Ù¾ÛŒØ´â€ŒÙ†ÛŒØ§Ø²Ù‡Ø§: Ø¯Ø± Ø³Ø§ÛŒØª Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ú†Ú© Ú©Ù†ÛŒØ¯\n" +
                "â€¢ Ø¸Ø±ÙÛŒØªâ€ŒÙ‡Ø§: Ø¨Ù‡ ØµÙˆØ±Øª Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ Ø¯Ø± Ø³Ù…Ø§\n" +
                "â€¢ ØªØºÛŒÛŒØ±Ø§Øª: ØªØ§ Ù‡ÙØªÙ‡ Ø¯ÙˆÙ… Ø§Ù…Ú©Ø§Ù†â€ŒÙ¾Ø°ÛŒØ±\n" +
                "â€¢ Ù…Ø´Ú©Ù„Ø§Øª: Ø¨Ø§ Ù…Ø¯ÛŒØ± Ú¯Ø±ÙˆÙ‡ Ù‡Ù…Ø§Ù‡Ù†Ú¯ Ø´ÙˆØ¯\n\n" +
                "ğŸ’¡ **ØªÙˆØµÛŒÙ‡:** Ø¨Ø§ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ Ù…Ø´ÙˆØ±Øª Ú©Ù†ÛŒØ¯"
            ],

            "Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡": [
                "ğŸ“– **Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ Ù…Ø±Ú©Ø²ÛŒ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ù…Ù†ØªØ¸Ø±ÛŒ**\n\n" +
                "ğŸ•’ **Ø³Ø§Ø¹Ø§Øª Ú©Ø§Ø±ÛŒ:**\n" +
                "â€¢ Ø±ÙˆØ²Ù‡Ø§ÛŒ Ø¹Ø§Ø¯ÛŒ: Û¸:Û°Û°-Û²Û°:Û°Û°\n" +
                "â€¢ Ù¾Ù†Ø¬Ø´Ù†Ø¨Ù‡â€ŒÙ‡Ø§: Û¸:Û°Û°-Û±Û³:Û°Û°\n" +
                "â€¢ Ø¬Ù…Ø¹Ù‡â€ŒÙ‡Ø§: ØªØ¹Ø·ÛŒÙ„\n\n" +
                "ğŸ“š **Ø§Ù…Ú©Ø§Ù†Ø§Øª:**\n" +
                "â€¢ ÛµÛ°,Û°Û°Û° Ø¬Ù„Ø¯ Ú©ØªØ§Ø¨\n" +
                "â€¢ Ù…Ù‚Ø§Ù„Ø§Øª Ø¨ÛŒÙ†â€ŒØ§Ù„Ù…Ù„Ù„ÛŒ\n" +
                "â€¢ Ù¾Ø§ÛŒÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø¹Ù„Ù…ÛŒ\n" +
                "â€¢ Ø³Ø§Ù„Ù† Ù…Ø·Ø§Ù„Ø¹Ù‡",

                "ğŸ” **Ø®Ø¯Ù…Ø§Øª Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡**\n\n" +
                "ğŸ“– **Ù‚ÙˆØ§Ù†ÛŒÙ† Ø§Ù…Ø§Ù†Øª:**\n" +
                "â€¢ Ø­Ø¯Ø§Ú©Ø«Ø± Ûµ Ú©ØªØ§Ø¨\n" +
                "â€¢ Ù…Ø¯Øª Ø§Ù…Ø§Ù†Øª: Û² Ù‡ÙØªÙ‡\n" +
                "â€¢ Ø§Ù…Ú©Ø§Ù† ØªØ¬Ø¯ÛŒØ¯: Û² Ø¨Ø§Ø±\n" +
                "â€¢ Ø¹Ø¶ÙˆÛŒØª Ø§Ø¬Ø¨Ø§Ø±ÛŒ\n\n" +
                "ğŸ’» **Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ Ø¢Ù†Ù„Ø§ÛŒÙ†:**\n" +
                "â€¢ Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡\n" +
                "â€¢ Ø±Ø²Ø±Ùˆ Ú©ØªØ§Ø¨\n" +
                "â€¢ ØªÙ…Ø¯ÛŒØ¯ Ø¢Ù†Ù„Ø§ÛŒÙ†"
            ],

            "Ø®ÙˆØ§Ø¨Ú¯Ø§Ù‡": [
                "ğŸ  **Ø®ÙˆØ§Ø¨Ú¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ù…Ù†ØªØ¸Ø±ÛŒ**\n\n" +
                "ğŸ¯ **Ø´Ø±Ø§ÛŒØ· Ø§Ø³Ú©Ø§Ù†:**\n" +
                "â€¢ Ø§ÙˆÙ„ÙˆÛŒØª Ø¨Ø§ Ø¯Ø§Ù†Ø´Ø¬ÙˆÛŒØ§Ù† Ø´Ù‡Ø±Ø³ØªØ§Ù†ÛŒ\n" +
                "â€¢ Ø¸Ø±ÙÛŒØª: ÛµÛ°Û° Ø¯Ø§Ù†Ø´Ø¬Ùˆ\n" +
                "â€¢ Ù‡Ø²ÛŒÙ†Ù‡: ØªØ±Ù…ÛŒ Û²,ÛµÛ°Û°,Û°Û°Û° ØªÙˆÙ…Ø§Ù†\n\n" +
                "ğŸ¢ **Ø§Ù…Ú©Ø§Ù†Ø§Øª:**\n" +
                "â€¢ Ø§ÛŒÙ†ØªØ±Ù†Øª Ù¾Ø±Ø³Ø±Ø¹Øª\n" +
                "â€¢ Ø³Ø§Ù„Ù† Ù…Ø·Ø§Ù„Ø¹Ù‡\n" +
                "â€¢ Ø³Ø§Ù„Ù† ÙˆØ±Ø²Ø´\n" +
                "â€¢ Ø¢Ø´Ù¾Ø²Ø®Ø§Ù†Ù‡ Ù…Ø´ØªØ±Ú©",

                "ğŸ“ **Ø«Ø¨Øª Ù†Ø§Ù… Ø®ÙˆØ§Ø¨Ú¯Ø§Ù‡   **\n\n" +
                "ğŸ—“ï¸ **Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ:**\n" +
                "â€¢ Ø´Ø±ÙˆØ¹ Ø«Ø¨Øª Ù†Ø§Ù…: Û±Û° Ø´Ù‡Ø±ÛŒÙˆØ±\n" +
                "â€¢ Ø§Ø¹Ù„Ø§Ù… Ù†ØªØ§ÛŒØ¬: Û²Û° Ø´Ù‡Ø±ÛŒÙˆØ±\n" +
                "â€¢ ØªØ­ÙˆÛŒÙ„ Ø®ÙˆØ§Ø¨Ú¯Ø§Ù‡: Û± Ù…Ù‡Ø±\n\n" +
                "ğŸ“„ **Ù…Ø¯Ø§Ø±Ú© Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø²:**\n" +
                "â€¢ ØªØµÙˆÛŒØ± Ø´Ù†Ø§Ø³Ù†Ø§Ù…Ù‡\n" +
                "â€¢ Ú©Ø§Ø±Øª Ø¯Ø§Ù†Ø´Ø¬ÙˆÛŒÛŒ\n" +
                "â€¢ Ø¹Ú©Ø³ Û³*Û´\n" +
                "â€¢ Ù…Ø¹Ø±ÙÛŒ Ù†Ø§Ù…Ù‡"
            ],

            "Ø´Ù‡Ø±ÛŒÙ‡": [
                "ğŸ’µ **Ø´Ù‡Ø±ÛŒÙ‡ ØªØ±Ù… Ù¾Ø§ÛŒÛŒØ²    Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ù…Ù†ØªØ¸Ø±ÛŒ**\n\n" +
                "ğŸ’° **Ù…Ù‚Ø§Ø¯ÛŒØ± Ø´Ù‡Ø±ÛŒÙ‡:**\n" +
                "â€¢ Ø´Ù‡Ø±ÛŒÙ‡ Ø«Ø§Ø¨Øª: Û³,Û°Û°Û°,Û°Û°Û° ØªÙˆÙ…Ø§Ù†\n" +
                "â€¢ Ø´Ù‡Ø±ÛŒÙ‡ Ù…ØªØºÛŒØ±: ÙˆØ§Ø­Ø¯â€ŒØ§ÛŒ Û±ÛµÛ°,Û°Û°Û° ØªÙˆÙ…Ø§Ù†\n" +
                "â€¢ Ù…Ø«Ø§Ù„ (Û±Û¶ ÙˆØ§Ø­Ø¯): Ûµ,Û´Û°Û°,Û°Û°Û° ØªÙˆÙ…Ø§Ù†\n\n" +
                "â° **Ù…Ù‡Ù„Øª Ù¾Ø±Ø¯Ø§Ø®Øª:**\n" +
                "â€¢ ØªØ§ Ù¾Ø§ÛŒØ§Ù† Ù‡ÙØªÙ‡ Ø³ÙˆÙ…\n" +
                "â€¢ Ø¬Ø±ÛŒÙ…Ù‡ ØªØ§Ø®ÛŒØ±: Û±ÛµÙª",

                "ğŸ¦ **Ø±ÙˆØ´â€ŒÙ‡Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø®Øª Ø´Ù‡Ø±ÛŒÙ‡**\n\n" +
                "ğŸ’³ **Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø®Øª:**\n" +
                "â€¢ Ø¯Ø±Ú¯Ø§Ù‡ Ø¨Ø§Ù†Ú©ÛŒ Ø³Ø§Ù…Ø§Ù†Ù‡ Ø³Ù…Ø§\n" +
                "â€¢ Ù¾Ø±Ø¯Ø§Ø®Øª Ø¯Ø± Ù…Ø­Ù„ Ø¨Ù‡ Ø­Ø³Ø§Ø¨Ø¯Ø§Ø±\n" +
                "â€¢ Ø·Ø±Ø­ Ø§Ù‚Ø³Ø§Ø· (Ø¨Ø§ Ù‡Ù…Ø§Ù‡Ù†Ú¯ÛŒ)\n\n" +
                "ğŸ“ **Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨ÛŒØ´ØªØ±:**\n" +
                "â€¢ Ø§Ø¯Ø§Ø±Ù‡ Ø§Ù…ÙˆØ± Ù…Ø§Ù„ÛŒ\n" +
                "â€¢ Ø¯Ø§Ø®Ù„ÛŒ: Û±Û²Û±\n" +
                "â€¢ Ø³Ø§Ø¹Ø§Øª: Û¸-Û±Ûµ"
            ],

            "Ø§Ø³ØªØ§Ø¯": [
                "ğŸ‘¨â€ğŸ« **Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§Ø³Ø§ØªÛŒØ¯ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ù…Ù†ØªØ¸Ø±ÛŒ**\n\n" +
                "ğŸŒ **Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª:**\n" +
                "â€¢ Ø³Ø§ÛŒØª Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ â†’ Ø§Ø¹Ø¶Ø§ÛŒ Ù‡ÛŒØ¦Øª Ø¹Ù„Ù…ÛŒ\n" +
                "â€¢ Ø³Ø§Ù…Ø§Ù†Ù‡ LMS\n" +
                "â€¢ Ø¯ÙØªØ± Ù‡Ø± Ø¯Ø§Ù†Ø´Ú©Ø¯Ù‡\n\n" +
                "ğŸ“ **Ø±ÙˆØ´â€ŒÙ‡Ø§ÛŒ Ø§Ø±ØªØ¨Ø§Ø·:**\n" +
                "â€¢ Ø§ÛŒÙ…ÛŒÙ„ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ÛŒ\n" +
                "â€¢ Ø³Ø§Ø¹Ø§Øª Ù…Ù„Ø§Ù‚Ø§Øª Ù…Ø´Ø®Øµ\n" +
                "â€¢ Ø³Ø§Ù…Ø§Ù†Ù‡ Ù¾ÛŒØ§Ù…â€ŒØ±Ø³Ø§Ù† LMS",

                "ğŸ’¼ **Ø³Ø§Ø¹Ø§Øª Ù…Ù„Ø§Ù‚Ø§Øª Ø§Ø³Ø§ØªÛŒØ¯**\n\n" +
                "ğŸ“… **Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù‡ÙØªÚ¯ÛŒ:**\n" +
                "â€¢ Ø¯Ø± Ø¯ÙØªØ± Ù‡Ø± Ø¯Ø§Ù†Ø´Ú©Ø¯Ù‡ Ù†ØµØ¨ Ø´Ø¯Ù‡\n" +
                "â€¢ Ø¯Ø± Ø³Ø§ÛŒØª Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ù…ÙˆØ¬ÙˆØ¯ Ø§Ø³Øª\n" +
                "â€¢ Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ø¨ÛŒÙ† Ø³Ø§Ø¹Ø§Øª Û±Û°-Û±Û²\n\n" +
                "ğŸ’¡ **ØªÙˆØµÛŒÙ‡:**\n" +
                "â€¢ Ø¨Ø±Ø§ÛŒ Ù…Ù„Ø§Ù‚Ø§Øª Ù‚Ø¨Ù„Ø§Ù‹ Ù‡Ù…Ø§Ù‡Ù†Ú¯ Ú©Ù†ÛŒØ¯\n" +
                "â€¢ Ø®Ø§Ø±Ø¬ Ø§Ø² Ø³Ø§Ø¹Ø§Øª Ø§Ø¯Ø§Ø±ÛŒ Ø§ÛŒÙ…ÛŒÙ„ Ø¨Ø²Ù†ÛŒØ¯"
            ],

            "Ù…Ø¹Ø¯Ù„": [
                "ğŸ“Š **Ø³ÛŒØ³ØªÙ… Ù†Ù…Ø±Ù‡â€ŒØ¯Ù‡ÛŒ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ù…Ù†ØªØ¸Ø±ÛŒ**\n\n" +
                "ğŸ¯ **Ø­Ø¯ÙˆØ¯ Ù†Ù…Ø±Ù‡:**\n" +
                "â€¢ Ø­Ø¯Ø§Ù‚Ù„ Ù‚Ø¨ÙˆÙ„ÛŒ: Û±Û°\n" +
                "â€¢ Ù…Ø´Ø±ÙˆØ·ÛŒ: Ù…Ø¹Ø¯Ù„ Ø²ÛŒØ± Û±Û²\n" +
                "â€¢ Ø§Ø®Ø·Ø§Ø± ØªØ­ØµÛŒÙ„ÛŒ: Ù…Ø¹Ø¯Ù„ Ø²ÛŒØ± Û±Û°\n\n" +
                "ğŸ”„ **Ø­Ø°Ù ØªØ±Ù…:**\n" +
                "â€¢ ÛŒÚ© Ø¨Ø§Ø± Ø¯Ø± Ø·ÙˆÙ„ ØªØ­ØµÛŒÙ„\n" +
                "â€¢ ØªØ§ Ù‡ÙØªÙ‡ Ú†Ù‡Ø§Ø±Ù… Ø§Ù…Ú©Ø§Ù†â€ŒÙ¾Ø°ÛŒØ±",

                "ğŸ“ˆ **Ø±Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø±ØªÙ‚Ø§Ø¡ Ù…Ø¹Ø¯Ù„**\n\n" +
                "ğŸ“ **Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒâ€ŒÙ‡Ø§:**\n" +
                "â€¢ Ø§Ø®Ø° Ù…Ø¬Ø¯Ø¯ Ø¯Ø±ÙˆØ³ Ø¨Ø§ Ù†Ù…Ø±Ù‡ Ù¾Ø§ÛŒÛŒÙ†\n" +
                "â€¢ Ø§Ù†ØªØ®Ø§Ø¨ ÙˆØ§Ø­Ø¯Ù‡Ø§ÛŒ Ø§Ø®ØªÛŒØ§Ø±ÛŒ\n" +
                "â€¢ Ø´Ø±Ú©Øª Ø¯Ø± Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ø¬Ø¨Ø±Ø§Ù†ÛŒ\n\n" +
                "ğŸ¤ **Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ:**\n" +
                "â€¢ Ù…Ø´Ø§ÙˆØ±Ù‡ Ø¨Ø§ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ\n" +
                "â€¢ Ø®Ø¯Ù…Ø§Øª ÙˆØ§Ø­Ø¯ Ù…Ø´Ø§ÙˆØ±Ù‡ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡"
            ],

            "Ø§Ù†Ø¶Ø¨Ø§Ø·ÛŒ": [
                "âš–ï¸ **Ù‚ÙˆØ§Ù†ÛŒÙ† Ø§Ù†Ø¶Ø¨Ø§Ø·ÛŒ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ù…Ù†ØªØ¸Ø±ÛŒ**\n\n" +
                "ğŸ“‹ **Ù…Ù‚Ø±Ø±Ø§Øª:**\n" +
                "â€¢ ØºÛŒØ¨Øª Ù…Ø¬Ø§Ø²: Û´ Ø¬Ù„Ø³Ù‡ Ø¯Ø± Ù‡Ø± Ø¯Ø±Ø³\n" +
                "â€¢ Ù…Ø­Ø±ÙˆÙ…ÛŒØª Ø§Ø² Ø§Ù…ØªØ­Ø§Ù†: ØºÛŒØ¨Øª Ø¨ÛŒØ´ Ø§Ø² Ø­Ø¯\n" +
                "â€¢ Ø´Ø¦ÙˆÙ†Ø§Øª Ø§Ø³Ù„Ø§Ù…ÛŒ: Ø±Ø¹Ø§ÛŒØª Ú©Ø§Ù…Ù„ Ø§Ù„Ø²Ø§Ù…ÛŒ Ø§Ø³Øª\n" +
                "â€¢ ØªØ®Ù„ÙØ§Øª: Ø¯Ø± Ø´ÙˆØ±Ø§ÛŒ Ø§Ù†Ø¶Ø¨Ø§Ø·ÛŒ Ø¨Ø±Ø±Ø³ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯\n\n" +
                "ğŸ“„ **Ø¢ÛŒÛŒÙ†â€ŒÙ†Ø§Ù…Ù‡:** Ø¯Ø± Ø³Ø§ÛŒØª Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ù…ÙˆØ¬ÙˆØ¯ Ø§Ø³Øª",

                "ğŸ“ **Ø¢ÛŒÛŒÙ†â€ŒÙ†Ø§Ù…Ù‡ Ø§Ù†Ø¶Ø¨Ø§Ø·ÛŒ Ø¯Ø§Ù†Ø´Ø¬ÙˆÛŒØ§Ù†**\n\n" +
                "âš ï¸ **Ù…ÙˆØ§Ø±Ø¯ Ù…Ù‡Ù…:**\n" +
                "â€¢ Ø­Ø¶ÙˆØ± Ù…Ù†Ø¸Ù… Ø¯Ø± Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§\n" +
                "â€¢ Ø±Ø¹Ø§ÛŒØª Ø±ÙØªØ§Ø± Ù…Ù†Ø§Ø³Ø¨\n" +
                "â€¢ Ù¾ÙˆØ´Ø´ Ø§Ø³Ù„Ø§Ù…ÛŒ\n" +
                "â€¢ Ø­ÙØ¸ Ø§Ù…ÙˆØ§Ù„ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡\n\n" +
                "â° **Ø§Ø¹ØªØ±Ø§Ø¶:** ØªØ§ Û·Û² Ø³Ø§Ø¹Øª Ù¾Ø³ Ø§Ø² Ø§Ø¨Ù„Ø§Øº\n" +
                "ğŸ¤ **Ù…Ø´Ø§ÙˆØ±Ù‡:** Ø§Ø¯Ø§Ø±Ù‡ Ø¢Ù…ÙˆØ²Ø´"
            ],

            "ÙˆØ§Ù…": [
                "ğŸ¦ **ÙˆØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ù†Ø´Ø¬ÙˆÛŒÛŒ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ù…Ù†ØªØ¸Ø±ÛŒ**\n\n" +
                "ğŸ’° **Ø§Ù†ÙˆØ§Ø¹ ÙˆØ§Ù…:**\n" +
                "â€¢ ÙˆØ§Ù… ØªØ­ØµÛŒÙ„ÛŒ: Û±Ûµ Ù…ÛŒÙ„ÛŒÙˆÙ† ØªÙˆÙ…Ø§Ù†\n" +
                "â€¢ ÙˆØ§Ù… ÙÙˆØ±ÛŒ: Ûµ Ù…ÛŒÙ„ÛŒÙˆÙ† ØªÙˆÙ…Ø§Ù†\n" +
                "â€¢ ÙˆØ§Ù… Ø´Ù‡Ø±ÛŒÙ‡: ØªØ§ Ø³Ù‚Ù Ø´Ù‡Ø±ÛŒÙ‡\n\n" +
                "âœ… **Ø´Ø±Ø§ÛŒØ·:**\n" +
                "â€¢ Ù…Ø¹Ø¯Ù„ Ø¨Ø§Ù„Ø§ÛŒ Û±Û´\n" +
                "â€¢ Ø¹Ø¯Ù… Ø§Ù‚Ø³Ø§Ø· Ù…Ø¹ÙˆÙ‚Ù‡\n" +
                "â€¢ Ø¶Ø§Ù…Ù† Ù…Ø¹ØªØ¨Ø±",

                "ğŸ“‘ **Ù…Ø±Ø§Ø­Ù„ Ø¯Ø±ÛŒØ§ÙØª ÙˆØ§Ù… ØªØ­ØµÛŒÙ„ÛŒ**\n\n" +
                "ğŸ‘£ **Ù…Ø±Ø§Ø­Ù„ Ø§Ø¯Ø§Ø±ÛŒ:**\n" +
                "Û±. Ù…Ø±Ø§Ø¬Ø¹Ù‡ Ø¨Ù‡ Ø§Ù…ÙˆØ± Ø¯Ø§Ù†Ø´Ø¬ÙˆÛŒÛŒ\n" +
                "Û². ØªÚ©Ù…ÛŒÙ„ ÙØ±Ù… Ø¯Ø±Ø®ÙˆØ§Ø³Øª\n" +
                "Û³. ØªØ§ÛŒÛŒØ¯ Ù…Ø¯ÛŒØ± Ú¯Ø±ÙˆÙ‡\n" +
                "Û´. ØªØ­ÙˆÛŒÙ„ Ù…Ø¯Ø§Ø±Ú©\n\n" +
                "â° **Ù…Ø¯Øª Ù¾Ø±Ø¯Ø§Ø®Øª:**\n" +
                "â€¢ Ø­Ø¯Ø§Ú©Ø«Ø± Û±Û° Ø±ÙˆØ² Ú©Ø§Ø±ÛŒ"
            ],

            "ØªØºÛŒÛŒØ± Ø±Ø´ØªÙ‡": [
                "ğŸ”„ **ØªØºÛŒÛŒØ± Ø±Ø´ØªÙ‡ Ø¯Ø± Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ù…Ù†ØªØ¸Ø±ÛŒ**\n\n" +
                "â° **Ø²Ù…Ø§Ù†:**\n" +
                "â€¢ ÙÙ‚Ø· Ø§Ø¨ØªØ¯Ø§ÛŒ Ø³Ø§Ù„ ØªØ­ØµÛŒÙ„ÛŒ\n" +
                "â€¢ Ø´Ø±Ø· Ù…Ø¹Ø¯Ù„: Ø¨Ø§Ù„Ø§ÛŒ Û±Ûµ\n" +
                "â€¢ Ù…Ø±Ø§Ø­Ù„:\n" +
                "  Û±. Ø¯Ø±ÛŒØ§ÙØª ÙØ±Ù… Ø§Ø² Ø§Ø¯Ø§Ø±Ù‡ Ø¢Ù…ÙˆØ²Ø´\n" +
                "  Û². ØªØ§ÛŒÛŒØ¯ Ù…Ø¯ÛŒØ± Ú¯Ø±ÙˆÙ‡ Ù…Ø¨Ø¯Ø§ Ùˆ Ù…Ù‚ØµØ¯\n" +
                "  Û³. Ø§Ø±Ø§Ø¦Ù‡ Ø¨Ù‡ Ø´ÙˆØ±Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ\n" +
                "  Û´. ØµØ¯ÙˆØ± Ù…Ø¬ÙˆØ²\n\n" +
                "ğŸ“… **Ù…Ù‡Ù„Øª:** ØªØ§ Ù¾Ø§ÛŒØ§Ù† Ù‡ÙØªÙ‡ Ø¯ÙˆÙ… Ù…Ù‡Ø±",

                "ğŸ“‹ **Ø´Ø±Ø§ÛŒØ· ØªØºÛŒÛŒØ± Ø±Ø´ØªÙ‡**\n\n" +
                "ğŸ“Š **Ø´Ø±Ø§ÛŒØ· Ù„Ø§Ø²Ù…:**\n" +
                "â€¢ Ù…Ø¹Ø¯Ù„ Ú©Ù„: Ø­Ø¯Ø§Ù‚Ù„ Û±Ûµ\n" +
                "â€¢ ØªØ¹Ø¯Ø§Ø¯ ÙˆØ§Ø­Ø¯ Ú¯Ø°Ø±Ø§Ù†Ø¯Ù‡: Ø­Ø¯Ø§Ú©Ø«Ø± Û´Û° ÙˆØ§Ø­Ø¯\n" +
                "â€¢ Ø¸Ø±ÙÛŒØª Ø±Ø´ØªÙ‡ Ù…Ù‚ØµØ¯: Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ø´Ø¯\n" +
                "â€¢ Ù¾ÛŒØ´â€ŒÙ†ÛŒØ§Ø²Ù‡Ø§: Ø¨Ø±Ø±Ø³ÛŒ Ø´ÙˆØ¯\n\n" +
                "ğŸ’¡ **ØªÙˆØµÛŒÙ‡:** Ø¨Ø§ Ù…Ø´Ø§ÙˆØ± Ø¢Ù…ÙˆØ²Ø´ÛŒ Ù…Ø´ÙˆØ±Øª Ú©Ù†ÛŒØ¯"
            ]
        };

        const lowerQuestion = question.toLowerCase();
        
        // Ø¬Ø³ØªØ¬ÙˆÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯
        let bestResponse = null;
        let bestScore = 0;

        for (const [keyword, responses] of Object.entries(enhancedKnowledge)) 
        {
            const score = this.calculateSimilarity(lowerQuestion, keyword);
            if (score > bestScore)
             {
                bestScore = score;
                bestResponse = responses[Math.floor(Math.random() * responses.length)];
            }
        }

        if (bestScore > 0.3 && bestResponse) 
        {
            return bestResponse;
        }

        // Ù¾Ø§Ø³Ø® Ø¹Ù…ÙˆÙ…ÛŒ
        return this.getGeneralResponse(question);
    }

    calculateSimilarity(question, keyword) 
    {
        const questionWords = question.split(' ');
        const keywordWords = keyword.split(' ');
        
        let matches = 0;
        questionWords.forEach(qWord => 
        {
            keywordWords.forEach(kWord => 
            {
                if (qWord.includes(kWord) || kWord.includes(qWord)) 
                {
                    matches++;
                }
            });
        });
        
        return matches / Math.max(questionWords.length, keywordWords.length);
    }

    getGeneralResponse(question) 
    {
        const responses = [
            `ğŸ¤” **Ø³ÙˆØ§Ù„: "${question}"**\n\n` +
            `ğŸ“ **Ø¨Ø±Ø§ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ù‚ÛŒÙ‚:**\n` +
            `â€¢ ØªÙ…Ø§Ø³ Ø¨Ø§ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡: Û°Û²Û±-Û¶Û¶Û±ÛµÛ°Û°Û°Û°\n` +
            `â€¢ Ø³Ø§ÛŒØª: www.montazeri-univ.ac.ir\n` +
            `â° **Ø³Ø§Ø¹Ø§Øª Ú©Ø§Ø±ÛŒ:** Û·:Û³Û°-Û±Û¸:Û°Û°`,

            `ğŸ’¡ **Ø¯Ø± Ù…ÙˆØ±Ø¯ Ø³ÙˆØ§Ù„ Ø´Ù…Ø§**\n\n` +
            `"${question}"\n\n` +
            `ğŸ¯ **Ø±Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª:**\n` +
            `âœ… Ø³Ø§Ù…Ø§Ù†Ù‡ Ø¢Ù…ÙˆØ²Ø´ÛŒ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡\n` +
            `âœ… Ø§Ø¯Ø§Ø±Ù‡ Ø¢Ù…ÙˆØ²Ø´\n` +
            `âœ… Ù…Ø¯ÛŒØ± Ú¯Ø±ÙˆÙ‡\n` +
            `âœ… ÙˆØ§Ø­Ø¯ Ù…Ø´Ø§ÙˆØ±Ù‡\n\n` +
            `ğŸ“± **Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ:**19-38781016 `,

            `ğŸ” **Ù¾Ø§Ø³Ø® Ø¨Ù‡ Ø³ÙˆØ§Ù„ Ø´Ù…Ø§**\n\n` +
            `Ø¨Ø±Ø§ÛŒ "${question}"\n\n` +
            `ğŸŒ **Ù…Ù†Ø§Ø¨Ø¹ Ø§Ø·Ù„Ø§Ø¹Ø§ØªÛŒ:**\n` +
            `â€¢ Ø³Ø§ÛŒØª Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡\n` +
            `â€¢ Ø³Ø§Ù…Ø§Ù†Ù‡ Ø³Ù…Ø§\n` +
            `â€¢ Ø¯ÙØªØ±Ú†Ù‡ Ø±Ø§Ù‡Ù†Ù…Ø§\n` +
            `â€¢ Ø§Ø·Ù„Ø§Ø¹ÛŒÙ‡â€ŒÙ‡Ø§\n\n` +
            `ğŸ“ **ØªÙ…Ø§Ø³:**19-38781016 `
        ];

        return responses[Math.floor(Math.random() * responses.length)];
    }

    getBasicResponse(question) 
    {
        const knowledgeBase = 
        {
            "Ú©Ù„Ø§Ø³": "Ø¨Ø±Ù†Ø§Ù…Ù‡ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ Ø¯Ø± Ø³Ø§Ù…Ø§Ù†Ù‡ Ø¢Ù…ÙˆØ²Ø´ÛŒ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ù…Ù†ØªØ¸Ø±ÛŒ Ù‚Ø§Ø¨Ù„ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø§Ø³Øª.",
            "Ø§Ù…ØªØ­Ø§Ù†": "Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø§Ù…ØªØ­Ø§Ù†Ø§Øª Ø¯Ùˆ Ù‡ÙØªÙ‡ Ù‚Ø¨Ù„ Ø§Ø² Ø´Ø±ÙˆØ¹ Ø¯Ø± Ø³Ø§Ù…Ø§Ù†Ù‡ Ø§Ø¹Ù„Ø§Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯.",
            "Ø«Ø¨Øª Ù†Ø§Ù…": "Ø«Ø¨Øª Ù†Ø§Ù… Ø§Ø² Ø·Ø±ÛŒÙ‚ Ø³Ø§Ù…Ø§Ù†Ù‡ Ø³Ù…Ø§ Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯.",
            "Ø§Ø³ØªØ§Ø¯": "Ù„ÛŒØ³Øª Ø§Ø³Ø§ØªÛŒØ¯ Ø¯Ø± Ø³Ø§ÛŒØª Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ù…ÙˆØ¬ÙˆØ¯ Ø§Ø³Øª.",
            "Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡": "Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ Ø§Ø² Û¸ ØµØ¨Ø­ ØªØ§ Û¸ Ø´Ø¨ ÙØ¹Ø§Ù„ Ø§Ø³Øª.",
            "Ø®ÙˆØ§Ø¨Ú¯Ø§Ù‡": "Ø®ÙˆØ§Ø¨Ú¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ø¨Ø±Ø§ÛŒ Ø¯Ø§Ù†Ø´Ø¬ÙˆÛŒØ§Ù† Ø´Ù‡Ø±Ø³ØªØ§Ù†ÛŒ Ø¯Ø± Ù†Ø¸Ø± Ú¯Ø±ÙØªÙ‡ Ø´Ø¯Ù‡ Ø§Ø³Øª.",
            "Ø´Ù‡Ø±ÛŒÙ‡": "Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø´Ù‡Ø±ÛŒÙ‡ Ø¯Ø± Ø³Ø§Ù…Ø§Ù†Ù‡ Ù…Ø§Ù„ÛŒ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ù‚Ø§Ø¨Ù„ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø§Ø³Øª.",
            "ÙˆØ§Ù…": "Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª ÙˆØ§Ù… Ø¨Ù‡ Ø§Ø¯Ø§Ø±Ù‡ Ø§Ù…ÙˆØ± Ø¯Ø§Ù†Ø´Ø¬ÙˆÛŒÛŒ Ù…Ø±Ø§Ø¬Ø¹Ù‡ Ú©Ù†ÛŒØ¯."
        };
        
        const lowerQuestion = question.toLowerCase();
        for (const [key, answer] of Object.entries(knowledgeBase)) 
        {
            if (lowerQuestion.includes(key)) 
            {
                return answer;
            }
        }
        
        return "Ø¨Ø±Ø§ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨ÛŒØ´ØªØ± Ø¨Ø§ Ø§Ø¯Ø§Ø±Ù‡ Ø¢Ù…ÙˆØ²Ø´ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ù…Ù†ØªØ¸Ø±ÛŒ ØªÙ…Ø§Ø³ Ø¨Ú¯ÛŒØ±ÛŒØ¯: 19-38781016 ";
    }

    displayMessage(message, sender) 
    {
        const chatMessages = document.getElementById('chat-messages');
        if (!chatMessages) return;
        
        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${sender}-message`;
        messageDiv.innerHTML = `
            <div class="message-content">
                ${message.replace(/\n/g, '<br>')}
                <div class="message-time">${this.getCurrentTime()}</div>
            </div>
        `;
        
        chatMessages.appendChild(messageDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    showTypingIndicator() 
    {
        const typingIndicator = document.getElementById('typing-indicator');
        if (typingIndicator) 
        {
            typingIndicator.style.display = 'block';
            const chatMessages = document.getElementById('chat-messages');
            if (chatMessages) 
            {
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
        }
    }

    hideTypingIndicator() 
    {
        const typingIndicator = document.getElementById('typing-indicator');
        if (typingIndicator) 
        {
            typingIndicator.style.display = 'none';
        }
    }

    getCurrentTime() 
    {
        const now = new Date();
        return now.toLocaleTimeString('fa-IR', { 
            hour: '2-digit', 
            minute: '2-digit',
            hour12: false 
        });
    }

    // Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØªÛŒ
    clearChat() 
    {
        const chatMessages = document.getElementById('chat-messages');
        if (chatMessages) 
        {
            chatMessages.innerHTML = '';
            this.conversationHistory = [];
            this.displayMessage(
                "ğŸ’¬ **Ù…Ú©Ø§Ù„Ù…Ù‡ Ø¬Ø¯ÛŒØ¯ Ø¢ØºØ§Ø² Ø´Ø¯**\n\n" +
                "Ø³Ù„Ø§Ù…! Ù…Ù† Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ù…Ù†ØªØ¸Ø±ÛŒ Ù‡Ø³ØªÙ….\n" +
                "Ú†Ú¯ÙˆÙ†Ù‡ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù… Ú©Ù…Ú©â€ŒØªØ§Ù† Ú©Ù†Ù…ØŸ ğŸŒŸ",
                'bot'
            );
        }
    }

    exportConversation() 
    {
        if (this.conversationHistory.length > 0) 
        {
            const data = 
            {
                university: "Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ù…Ù†ØªØ¸Ø±ÛŒ",
                timestamp: new Date().toISOString(),
                conversations: this.conversationHistory
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const blob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `university-chat-${new Date().toLocaleDateString('fa-IR')}.json`;
            a.click();
            
            URL.revokeObjectURL(url);
            
            this.displayMessage("âœ… Ù…Ú©Ø§Ù„Ù…Ù‡ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯", 'bot');
        } 
        else 
        {
            this.displayMessage("ğŸ’¡ Ù‡ÛŒÚ† Ù…Ú©Ø§Ù„Ù…Ù‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ú©Ø±Ø¯Ù† ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯", 'bot');
        }
    }
}

// Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø±
document.addEventListener('DOMContentLoaded', function() 
{
    window.universityAssistant = new AIChatAssistant();
    
    // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØªÛŒ Ø§Ú¯Ø± ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ù†Ø¯
    const clearBtn = document.getElementById('clear-chat');
    if (clearBtn) 
    {
        clearBtn.addEventListener('click', () => window.universityAssistant.clearChat());
    }
    
    const exportBtn = document.getElementById('export-chat');
    if (exportBtn) 
    {
        exportBtn.addEventListener('click', () => window.universityAssistant.exportConversation());
    }
    
    console.log('ğŸš€ Ø¯Ø³ØªÛŒØ§Ø± Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ù…Ù†ØªØ¸Ø±ÛŒ Ø¨Ø§ ChatGPT Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø´Ø¯');
});

// ØªØ§Ø¨Ø¹ Ø¨Ø±Ø§ÛŒ ØªÙ†Ø¸ÛŒÙ… API Key Ø¬Ø¯ÛŒØ¯
function setOpenAIAPIKey(newKey) 
{
    if (window.universityAssistant) 
    {
        window.universityAssistant.chatGPTApiKey = newKey;
        console.log('API Key Ø¨Ù‡ Ø±ÙˆØ² Ø´Ø¯');
        window.universityAssistant.checkChatGPTAvailability();
    }
}

// ØªØ§Ø¨Ø¹ Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ø§
function showAbout() 
{
    const aboutText = `
ğŸ“ **Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ù…Ù†ØªØ¸Ø±ÛŒ**

ğŸ“ **Ø·Ø±Ø§Ø­ Ùˆ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù†ÙˆÛŒØ³:** Ø§Ù…ÛŒØ± Ù…Ø­Ù…Ø¯ Ù†ØµÛŒØ±ÛŒ
ğŸ¢ **Ø´Ø±Ú©Øª:** Ù…Ú© Ø¯Ø§Ú© 
ğŸ“± *5.3.1*Ù†Ø³Ø®Ù‡:** 

âœ¨ **ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø³ÛŒØ³ØªÙ…:**
âœ… Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ùˆ Ø·Ø¨ÛŒØ¹ÛŒ
âœ… Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ù‚ÛŒÙ‚ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ù…Ù†ØªØ¸Ø±ÛŒ
âœ… Ø±Ø§Ø¨Ø· Ú©Ø§Ø±Ø¨Ø±ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡

ğŸ“ **Ø±Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø±ØªØ¨Ø§Ø·ÛŒ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡:**
â€¢ ØªÙ„ÙÙ†: 19-38781016
â€¢ Ø³Ø§ÛŒØª: www.montazeri-univ.ac.ir`;
    
    alert(aboutText);
    return false;
}